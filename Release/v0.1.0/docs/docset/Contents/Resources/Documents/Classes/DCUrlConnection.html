<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 STRICT//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>DCUrlConnection class reference</title>
  <meta http-equiv="Content-Type" content="application/xhtml+xml;charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="../css/screen.css" />
  <meta name="generator" content="appledoc" />
</head>
<body>
  <div id="mainContainer">
    <h1>DCUrlConnection class reference</h1>
    <table summary="Basic information" id="classInfo">
      <tr class="alt">
        <td><label id="classDeclaration">Inherits from</label></td>
        <td>NSObject</td>
      </tr>
      <tr>
        <td><label id="classDeclaration">Declared in</label></td>
        <td>DCUrlConnection+NSURLConnectionDelegate.m</td>
      </tr>
    </table>
      <h2>Overview</h2>
<p>This is the driver class for communicating with a url. </p>
<p>It's basic job is to send and receive data from the server and to manage security. Here is a basic example of using this class: <div class="example"><pre><code>&nbsp;NSString&nbsp;*request&nbsp;=&nbsp;@"&lt;?xml&nbsp;version=\"1.0\"&nbsp;encoding=\"UTF-8\"&gt;"</code><code>&nbsp;&nbsp;&nbsp;&nbsp;@"&lt;soap:Envelope&nbsp;xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"&gt;"</code><code>&nbsp;&nbsp;&nbsp;&nbsp;@"&lt;soap:Body&gt;"</code><code>&nbsp;&nbsp;&nbsp;&nbsp;@"&lt;dhc:balance&nbsp;xmlns:dhc=\""&nbsp;MODEL_SCHEMA&nbsp;"\"&gt;"</code><code>&nbsp;&nbsp;&nbsp;&nbsp;@"&lt;forAccountNumber&gt;1234&lt;/forAccountNumber&gt;"</code><code>&nbsp;&nbsp;&nbsp;&nbsp;@"&lt;/dhc:balance&gt;"</code><code>&nbsp;&nbsp;&nbsp;&nbsp;@"\n\t&lt;/soap:Body&gt;"</code><code>&nbsp;&nbsp;&nbsp;&nbsp;@"\n&lt;/soap:Envelope&gt;";</code><code>&nbsp;<a href="">DCUrlConnection</a>&nbsp;*connection&nbsp;=&nbsp;[<a href="">DCUrlConnection</a>&nbsp;<a href="#createWithUrl">createWithUrl</a>:&nbsp;BANKING];</code><code>&nbsp;[connection&nbsp;<a href="#setHeaderValue">setHeaderValue</a>:&nbsp;BALANCE_ACTION&nbsp;<a href="#forKey">forKey</a>:&nbsp;@"SOAPAction"];</code><code>&nbsp;<a href="#NSError">NSError</a>&nbsp;*error&nbsp;=&nbsp;nil;</code><code>&nbsp;NSData&nbsp;*data&nbsp;=&nbsp;[connection&nbsp;<a href="#post">post</a>:&nbsp;request&nbsp;<a href="#errorVar">errorVar</a>:&error];</code><code>&nbsp;if&nbsp;(error&nbsp;!=&nbsp;nil)&nbsp;{</code><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Deal&nbsp;with&nbsp;the&nbsp;error.</code><code>&nbsp;}</code><code>&nbsp;&nbsp&nbsp;</code><code>&nbsp;//&nbsp;Otherwise&nbsp;process&nbsp;the&nbsp;results.</code></pre></div>
</p>
      <h2>Tasks</h2>
      <h3>Properties</h3>
      <ul class="methods">
        <li>
          <span class="tooltipRegion">
            <code><a href=#serverUrl>serverUrl</a></code>
            <span class="specialType">property</span>
            <span class="tooltip">This is the url that refers to the server. </span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#allowSelfSignedCertificates>allowSelfSignedCertificates</a></code>
            <span class="specialType">property</span>
            <span class="tooltip">If set to true, the DCUrlConnection will accept self signed cerificates from the server. </span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#storeCredentials>storeCredentials</a></code>
            <span class="specialType">property</span>
            <span class="tooltip">If set to true, credentials are stored and reused. </span>          </span>
        </li>
      </ul>
      <h3>Constructors and factory methods</h3>
      <ul class="methods">
        <li>
          <span class="tooltipRegion">
            <code><a href=#initWithUrl:>- initWithUrl:</a></code>
            <span class="tooltip">Default constructor. </span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#createWithUrl:>+ createWithUrl:</a></code>
            <span class="tooltip">Factory method which generates a autorelease instance. </span>          </span>
        </li>
      </ul>
      <h3>Communicaton</h3>
      <ul class="methods">
        <li>
          <span class="tooltipRegion">
            <code><a href=#post:errorVar:>- post:errorVar:</a></code>
            <span class="tooltip">Call this to post a message to the destination server. </span>          </span>
        </li>
      </ul>
      <h3>Additonal properties</h3>
      <ul class="methods">
        <li>
          <span class="tooltipRegion">
            <code><a href=#setHeaderValue:forKey:>- setHeaderValue:forKey:</a></code>
            <span class="tooltip">Adds a header element to the message. </span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#setUsername:password:>- setUsername:password:</a></code>
            <span class="tooltip">Sets the username and password to be used for encrypted connections. </span>          </span>
        </li>
      </ul>
      <h3>Delegate methods</h3>
      <ul class="methods">
        <li>
          <span class="tooltipRegion">
            <code><a href=#connection:willSendRequest:redirectResponse:>- connection:willSendRequest:redirectResponse:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#connection:canAuthenticateAgainstProtectionSpace:>- connection:canAuthenticateAgainstProtectionSpace:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#connection:needNewBodyStream:>- connection:needNewBodyStream:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#connection:didReceiveAuthenticationChallenge:>- connection:didReceiveAuthenticationChallenge:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#connection:didCancelAuthenticationChallenge:>- connection:didCancelAuthenticationChallenge:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#connectionShouldUseCredentialStorage:>- connectionShouldUseCredentialStorage:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#connection:didReceiveResponse:>- connection:didReceiveResponse:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#connection:didReceiveData:>- connection:didReceiveData:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite:>- connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#connectionDidFinishLoading:>- connectionDidFinishLoading:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#connection:didFailWithError:>- connection:didFailWithError:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
        <li>
          <span class="tooltipRegion">
            <code><a href=#connection:willCacheResponse:>- connection:willCacheResponse:</a></code>
            <span class="tooltip"></span>          </span>
        </li>
      </ul>
      <h2>Class methods</h2>
      <h3><a name="createWithUrl:"></a>createWithUrl:</h3>
<p>Factory method which generates a autorelease instance. </p>
      <code class="methodDeclaration">+ (DCUrlConnection *)createWithUrl:(NSString *)        <span class="parameter">aUrl</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection.h</code>
      <h2>Instance methods</h2>
      <h3><a name="initWithUrl:"></a>initWithUrl:</h3>
<p>Default constructor. </p>
      <code class="methodDeclaration">- (DCUrlConnection *)initWithUrl:(NSString *)        <span class="parameter">aUrl</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection.h</code>
      <h3><a name="post:errorVar:"></a>post:errorVar:</h3>
<p>Call this to post a message to the destination server. </p>
      <code class="methodDeclaration">- (NSData *)post:(NSString *)        <span class="parameter">bodyContent</span>
 errorVar:(NSError **)        <span class="parameter">aErrorVar</span>
</code>
      <h5>Parameters</h5>
      <dl class="parameterList">
        <dt>bodyContent</dt>
        <dd><p>a string containing the message to send via http post. </p>
</dd>
        <dt>aErrorVar</dt>
        <dd><p>reference to an error variable that will be populated if an error occurs. This must be passed as `&aErrorVar`. In other words, the address of the error variable. </p>
</dd>
      </dl>
      <h5>Discussion</h5>
<p>The bodyContent data will be set as the httpBodyContent in the post message. The response is the raw stream returned by the server. </p>
      <h5>See also</h5>
      <ul class="seeAlso">
        <li><code><a href="#NSURLConnectionDelegate for details of how the response is assembled.">NSURLConnectionDelegate for details of how the response is assembled.</a></code></li>
      </ul>
      <h5>Declared in</h5>
      <code>DCUrlConnection.h</code>
      <h3><a name="setHeaderValue:forKey:"></a>setHeaderValue:forKey:</h3>
<p>Adds a header element to the message. </p>
      <code class="methodDeclaration">- (void)setHeaderValue:(NSString *)        <span class="parameter">value</span>
 forKey:(NSString *)        <span class="parameter">key</span>
</code>
      <h5>Discussion</h5>
<p>Call before posting a message. </p>
      <h5>Declared in</h5>
      <code>DCUrlConnection.h</code>
      <h3><a name="setUsername:password:"></a>setUsername:password:</h3>
<p>Sets the username and password to be used for encrypted connections. </p>
      <code class="methodDeclaration">- (void)setUsername:(NSString *)        <span class="parameter">aUsername</span>
 password:(NSString *)        <span class="parameter">aPassword</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection.h</code>
      <h3><a name="connection:willSendRequest:redirectResponse:"></a>connection:willSendRequest:redirectResponse:</h3>
<p>      <code class="methodDeclaration">- (NSURLRequest *)connection:(NSURLConnection *)        <span class="parameter">connection</span>
 willSendRequest:(NSURLRequest *)        <span class="parameter">request</span>
 redirectResponse:(NSURLResponse *)        <span class="parameter">response</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h3><a name="connection:canAuthenticateAgainstProtectionSpace:"></a>connection:canAuthenticateAgainstProtectionSpace:</h3>
<p>      <code class="methodDeclaration">- (BOOL)connection:(NSURLConnection *)        <span class="parameter">connection</span>
 canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)        <span class="parameter">protectionSpace</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h3><a name="connection:needNewBodyStream:"></a>connection:needNewBodyStream:</h3>
<p>      <code class="methodDeclaration">- (NSInputStream *)connection:(NSURLConnection *)        <span class="parameter">connection</span>
 needNewBodyStream:(NSURLRequest *)        <span class="parameter">request</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h3><a name="connection:didReceiveAuthenticationChallenge:"></a>connection:didReceiveAuthenticationChallenge:</h3>
<p>      <code class="methodDeclaration">- (void)connection:(NSURLConnection *)        <span class="parameter">connection</span>
 didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)        <span class="parameter">challenge</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h3><a name="connection:didCancelAuthenticationChallenge:"></a>connection:didCancelAuthenticationChallenge:</h3>
<p>      <code class="methodDeclaration">- (void)connection:(NSURLConnection *)        <span class="parameter">connection</span>
 didCancelAuthenticationChallenge:(NSURLAuthenticationChallenge *)        <span class="parameter">challenge</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h3><a name="connectionShouldUseCredentialStorage:"></a>connectionShouldUseCredentialStorage:</h3>
<p>      <code class="methodDeclaration">- (BOOL)connectionShouldUseCredentialStorage:(NSURLConnection *)        <span class="parameter">connection</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h3><a name="connection:didReceiveResponse:"></a>connection:didReceiveResponse:</h3>
<p>      <code class="methodDeclaration">- (void)connection:(NSURLConnection *)        <span class="parameter">connection</span>
 didReceiveResponse:(NSURLResponse *)        <span class="parameter">response</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h3><a name="connection:didReceiveData:"></a>connection:didReceiveData:</h3>
<p>      <code class="methodDeclaration">- (void)connection:(NSURLConnection *)        <span class="parameter">connection</span>
 didReceiveData:(NSData *)        <span class="parameter">data</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h3><a name="connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite:"></a>connection:didSendBodyData:totalBytesWritten:totalBytesExpectedToWrite:</h3>
<p>      <code class="methodDeclaration">- (void)connection:(NSURLConnection *)        <span class="parameter">connection</span>
 didSendBodyData:(NSInteger)        <span class="parameter">bytesWritten</span>
 totalBytesWritten:(NSInteger)        <span class="parameter">totalBytesWritten</span>
 totalBytesExpectedToWrite:(NSInteger)        <span class="parameter">totalBytesExpectedToWrite</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h3><a name="connectionDidFinishLoading:"></a>connectionDidFinishLoading:</h3>
<p>      <code class="methodDeclaration">- (void)connectionDidFinishLoading:(NSURLConnection *)        <span class="parameter">connection</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h3><a name="connection:didFailWithError:"></a>connection:didFailWithError:</h3>
<p>      <code class="methodDeclaration">- (void)connection:(NSURLConnection *)        <span class="parameter">connection</span>
 didFailWithError:(NSError *)        <span class="parameter">error</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h3><a name="connection:willCacheResponse:"></a>connection:willCacheResponse:</h3>
<p>      <code class="methodDeclaration">- (NSCachedURLResponse *)connection:(NSURLConnection *)        <span class="parameter">connection</span>
 willCacheResponse:(NSCachedURLResponse *)        <span class="parameter">cachedResponse</span>
</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection+NSURLConnectionDelegate.h</code>
      <h2>Properties</h2>
      <h3><a name="serverUrl"></a>serverUrl</h3>
<p>This is the url that refers to the server. </p>
      <code class="methodDeclaration">@property NSString *serverUrl</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection.h</code>
      <h3><a name="allowSelfSignedCertificates"></a>allowSelfSignedCertificates</h3>
<p>If set to true, the <a href="">DCUrlConnection</a> will accept self signed cerificates from the server. </p>
      <code class="methodDeclaration">@property BOOL allowSelfSignedCertificates</code>
      <h5>Discussion</h5>
<p>This is most useful when developing code as the server can be on the developer's machine. This setting allows the developer to work without having to obtain formal certifcates. </p>
      <h5>Declared in</h5>
      <code>DCUrlConnection.h</code>
      <h3><a name="storeCredentials"></a>storeCredentials</h3>
<p>If set to true, credentials are stored and reused. </p>
      <code class="methodDeclaration">@property BOOL storeCredentials</code>
      <h5>Declared in</h5>
      <code>DCUrlConnection.h</code>
    <hr />
    <p id="lastUpdated">      (Last updated: 2010-01-21)
      <br />
      Back to <a href="../index.html">index</a> / <a href="../hierarchy.html">hierarchy</a>.
    </p>
  </div>
</body>
</html>
